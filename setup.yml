---
- hosts: localhost
  become: no
  connection: local
  gather_facts: no

  #vars_prompt:
  #  - name: config_file
  #    prompt: "Which vars should I load?"
  #    private: no

  vars_files:
    - vars/home-pc.yml
      #- vars/{{ config_files }}.yml
      #- vars/home-pc.yml

  tasks:
    - name: Get size of long to determine architecture
      command: getconf LONG_BIT
      register: long_bit
      changed_when: false

    #######################
    # Basic configuration #
    #######################
    - include: tasks/xorg.yml
    - include: tasks/conky.yml
    - include: tasks/disable-automute.yml
    - include: tasks/enable-numlock.yml
    - include: tasks/fonts-terminal.yml
    - include: tasks/fonts-desktop.yml

    #- include: tasks/vim.yml user={{ user_item }}
    - include: tasks/vim.yml user=andy
    - include: tasks/vim.yml user=root
    #  with_items: '{{ users_inc_super }}'
    #  control_loop:
    #    loop_var: '{{ user_item }}'
      

    #- include: tasks/basic-configuration.yml
    #- include: tasks/alsamixer-automute.yml
    #- include: tasks/num-lock.yml

    #######################
    #       SOFTWARE      #
    #######################

    # Internet
    # --------

    - include: tasks/google-chrome.yml

    # Collaboration
    # -------------

    - include: tasks/nvpy.yml



    # Configure VIM with Ultimate vimrc
    #- include: tasks/vim.yml user={{ user_item }}
    #  with_items: '{{ users_inc_super }}'
    #  loop_control:
    #    loop_var: user_item

  handlers:
    - name: reload i3
      shell: i3-msg reload

    - name: save alsamixer
      become: yes
      shell: alsactl store

    - name: set xorg
      shell: mhwd-gpu --setgl nvidia --setxorg /etc/X11/mhwd.d/nvidia.conf
      become: yes

    - name: monitor setup
      script: files/3-monitor-setup.sh

    - debug: msg="set xorg has been run!"

    - name: enable numlockx
      shell: numlockx
      become: no
